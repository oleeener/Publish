<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <title>Stock Market Performance</title>
    <style>
      body {
        font-family: 'OpenSans', sans-serif;
        font-weight: 500;
        color: #2e2e2e;
      }    
      line {
        stroke: gray;
      }

      line#limitx, line#limity {
        stroke: #FED966;
        stroke-width: 3;
        stroke-dasharray: 3 6;
      }
      .bar {
        fill: #80cbc4;
      }            
      .hide {
        display: none;
      }      
      .info_box_col {
        height: 100px;
      }
    </style>
  </head>
  <body>

  <div class="container-fluid">
    <div class="row">
      <div class='col-3'>
        <h1 id='graph_title' class="h2"></h1>
        <div class="form-group">
          <label for="sel_symbol">Symbol: </label>
          <select id='sel_symbol'>
            <option value="HSI" selected>HSI</option>
            <option value="AAPL">AAPL</option>
          </select>   
        </div>        
        <div class="form-group">
          <label for="sel_data_column">Metrics: </label>
          <select id='sel_data_column'>
            <option value="close" selected>Close</option>
            <option value="open">Open</option>
            <option value="volume">Volume</option>
          </select>   
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input sel_data_year" name="sel_data_year" type="checkbox" id="sel_data_year2019" value="2019">
          <label class="form-check-label" for="sel_data_year2019">2019</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input sel_data_year" name="sel_data_year" type="checkbox" id="sel_data_year2018" value="2018">
          <label class="form-check-label" for="sel_data_year2018">2018</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input sel_data_year" name="sel_data_year" type="checkbox" id="sel_data_year2017" value="2017">
          <label class="form-check-label" for="sel_data_year2017">2017</label>
        </div>   
        <div class="form-check form-check-inline">
          <input class="form-check-input sel_data_year" name="sel_data_year" type="checkbox" id="sel_data_year2016" value="2016">
          <label class="form-check-label" for="sel_data_year2016">2016</label>
        </div>            
      </div> 
      <div class='col info_box_col'>
        <div id='info_symbol' class='info_box'></div>
        <div id='info_date' class='info_box'></div>
        <div id='info_open' class='info_box'></div>
        <div id='info_close' class='info_box'></div>
        <div id='info_volume' class='info_box'></div>
      </div>       
    </div>
    <div class="row">
      <div class='col'>
        <div id = 'chart1'>
        </div>
      </div>
    </div>
  </div>
    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/d3.min.js"></script>  

    <script>
      function graph() {
        var data = [{"date":"2002-01","close":10725.299805,"open":10797.990234,"volume":271279973.913043499,"symbol":"HSI"},{"date":"2002-02","close":10482.549805,"open":10660.759766,"volume":225569350.0,"symbol":"HSI"},{"date":"2002-03","close":11032.919922,"open":11025.030273,"volume":268346809.5238095224,"symbol":"HSI"},{"date":"2002-04","close":11497.580078,"open":11337.889648,"volume":233641427.2727272809,"symbol":"HSI"},{"date":"2002-05","close":11301.94043,"open":11385.19043,"volume":261338600.0,"symbol":"HSI"},{"date":"2002-06","close":10598.549805,"open":10615.139648,"volume":205131700.0,"symbol":"HSI"},{"date":"2002-07","close":10267.360352,"open":10169.280273,"volume":203670765.2173913121,"symbol":"HSI"},{"date":"2002-08","close":10043.870117,"open":10034.219727,"volume":172513481.8181818128,"symbol":"HSI"},{"date":"2002-09","close":9072.209961,"open":9098.929688,"volume":203436742.8571428657,"symbol":"HSI"},{"date":"2002-10","close":9441.25,"open":9609.160156,"volume":257338182.6086956561,"symbol":"HSI"},{"date":"2002-11","close":10069.870117,"open":10170.299805,"volume":265897904.7619047761,"symbol":"HSI"},{"date":"2002-12","close":9321.290039,"open":9298.780273,"volume":229506018.1818181872,"symbol":"HSI"},{"date":"2003-01","close":9258.950195,"open":9251.94043,"volume":178839513.0434782505,"symbol":"HSI"},{"date":"2003-02","close":9122.660156,"open":9146.629883,"volume":161860290.0,"symbol":"HSI"},{"date":"2003-03","close":8634.450195,"open":8755.80957,"volume":214812219.0476190448,"symbol":"HSI"},{"date":"2003-04","close":8717.219727,"open":8758.240234,"volume":244954263.6363636255,"symbol":"HSI"},{"date":"2003-05","close":9487.379883,"open":9482.099609,"volume":244308809.0909090936,"symbol":"HSI"},{"date":"2003-06","close":9577.120117,"open":9594.94043,"volume":268074209.5238095224,"symbol":"HSI"},{"date":"2003-07","close":10134.830078,"open":10103.160156,"volume":272294139.1304348111,"symbol":"HSI"},{"date":"2003-08","close":10908.990234,"open":10812.870117,"volume":284872152.3809523582,"symbol":"HSI"},{"date":"2003-09","close":11229.870117,"open":11227.040039,"volume":336746654.5454545617,"symbol":"HSI"},{"date":"2003-10","close":12190.099609,"open":12139.969727,"volume":375136313.0434782505,"symbol":"HSI"},{"date":"2003-11","close":12317.469727,"open":12108.790039,"volume":235626400.0,"symbol":"HSI"},{"date":"2003-12","close":12575.94043,"open":12529.830078,"volume":271582826.086956501,"symbol":"HSI"},{"date":"2004-01","close":13289.370117,"open":13315.019531,"volume":376244300.0,"symbol":"HSI"},{"date":"2004-02","close":13907.030273,"open":13722.709961,"volume":296890630.0,"symbol":"HSI"},{"date":"2004-03","close":12681.669922,"open":12706.700195,"volume":305499434.7826086879,"symbol":"HSI"},{"date":"2004-04","close":11942.959961,"open":11898.530273,"volume":322712681.8181818128,"symbol":"HSI"},{"date":"2004-05","close":12198.240234,"open":12081.679688,"volume":325845895.2380952239,"symbol":"HSI"},{"date":"2004-06","close":12285.75,"open":12199.179688,"volume":264202800.0,"symbol":"HSI"},{"date":"2004-07","close":12238.030273,"open":12290.570313,"volume":221435663.6363636255,"symbol":"HSI"},{"date":"2004-08","close":12850.280273,"open":12833.349609,"volume":257894318.1818181872,"symbol":"HSI"},{"date":"2004-09","close":13120.030273,"open":13056.799805,"volume":359640609.0909090638,"symbol":"HSI"},{"date":"2004-10","close":13054.660156,"open":13027.120117,"volume":303166942.8571428657,"symbol":"HSI"},{"date":"2004-11","close":14060.049805,"open":14059.849609,"volume":386011863.6363636255,"symbol":"HSI"},{"date":"2004-12","close":14230.139648,"open":14184.830078,"volume":289759113.0434782505,"symbol":"HSI"},{"date":"2005-01","close":13721.69043,"open":13625.230469,"volume":373863895.2380952239,"symbol":"HSI"},{"date":"2005-02","close":14195.349609,"open":14204.860352,"volume":342742400.0,"symbol":"HSI"},{"date":"2005-03","close":13516.879883,"open":13515.379883,"volume":325781695.2380952239,"symbol":"HSI"},{"date":"2005-04","close":13908.969727,"open":13829.450195,"volume":286846030.0,"symbol":"HSI"},{"date":"2005-05","close":13867.070313,"open":13815.730469,"volume":247783950.0,"symbol":"HSI"},{"date":"2005-06","close":14201.05957,"open":14281.469727,"volume":373823218.1818181872,"symbol":"HSI"},{"date":"2005-07","close":14880.980469,"open":14863.509766,"volume":414718820.0,"symbol":"HSI"},{"date":"2005-08","close":14903.549805,"open":14853.639648,"volume":373769391.3043478131,"symbol":"HSI"},{"date":"2005-09","close":15428.519531,"open":15449.299805,"volume":287482990.4761904478,"symbol":"HSI"},{"date":"2005-10","close":14386.370117,"open":14313.419922,"volume":372217110.0,"symbol":"HSI"},{"date":"2005-11","close":14937.139648,"open":15028.740234,"volume":279920636.3636363745,"symbol":"HSI"},{"date":"2005-12","close":14876.429688,"open":14959.419922,"volume":294110540.0,"symbol":"HSI"},{"date":"2006-01","close":15753.139648,"open":15659.209961,"volume":481520757.8947368264,"symbol":"HSI"},{"date":"2006-02","close":15918.480469,"open":15920.490234,"volume":432521710.0,"symbol":"HSI"},{"date":"2006-03","close":15805.040039,"open":15942.730469,"volume":357479504.3478260636,"symbol":"HSI"},{"date":"2006-04","close":16661.300781,"open":16461.599609,"volume":413474164.7058823705,"symbol":"HSI"},{"date":"2006-05","close":15857.889648,"open":15976.370117,"volume":463976480.0,"symbol":"HSI"},{"date":"2006-06","close":16267.620117,"open":16170.790039,"volume":386513686.3636363745,"symbol":"HSI"},{"date":"2006-07","close":16971.339844,"open":17103.439453,"volume":276575361.9047619104,"symbol":"HSI"},{"date":"2006-08","close":17392.269531,"open":17395.539063,"volume":285546400.0,"symbol":"HSI"},{"date":"2006-09","close":17543.050781,"open":17559.669922,"volume":579976914.2857142687,"symbol":"HSI"},{"date":"2006-10","close":18324.349609,"open":18196.039063,"volume":779164900.0,"symbol":"HSI"},{"date":"2006-11","close":18960.480469,"open":18944.560547,"volume":936436409.0909091234,"symbol":"HSI"},{"date":"2006-12","close":19964.720703,"open":20049.029297,"volume":1032686436.8421052694,"symbol":"HSI"},{"date":"2007-01","close":20106.419922,"open":20463.820313,"volume":1300847209.0909090042,"symbol":"HSI"},{"date":"2007-02","close":19651.509766,"open":19426.949219,"volume":985128344.444444418,"symbol":"HSI"},{"date":"2007-03","close":19800.929688,"open":19810.859375,"volume":1292611613.6363637447,"symbol":"HSI"},{"date":"2007-04","close":20318.980469,"open":20525.960938,"volume":1456298688.8888888359,"symbol":"HSI"},{"date":"2007-05","close":20634.470703,"open":20405.949219,"volume":1316270290.476190567,"symbol":"HSI"},{"date":"2007-06","close":21772.730469,"open":21997.25,"volume":1929686390.0,"symbol":"HSI"},{"date":"2007-07","close":23184.939453,"open":23023.429688,"volume":2112869819.0476191044,"symbol":"HSI"},{"date":"2007-08","close":23984.140625,"open":23584.660156,"volume":2626864843.478260994,"symbol":"HSI"},{"date":"2007-09","close":27142.470703,"open":27126.130859,"volume":2243930510.5263156891,"symbol":"HSI"},{"date":"2007-10","close":31352.580078,"open":31530.960938,"volume":3368489314.2857141495,"symbol":"HSI"},{"date":"2007-11","close":28643.609375,"open":28604.679688,"volume":2646676545.4545454979,"symbol":"HSI"},{"date":"2007-12","close":27812.650391,"open":27437.939453,"volume":1961904563.1578948498,"symbol":"HSI"},{"date":"2008-01","close":23455.740234,"open":23789.720703,"volume":3070506495.4545454979,"symbol":"HSI"},{"date":"2008-02","close":24331.669922,"open":24226.830078,"volume":2225152542.1052632332,"symbol":"HSI"},{"date":"2008-03","close":22849.199219,"open":22997.039063,"volume":2601644368.4210524559,"symbol":"HSI"},{"date":"2008-04","close":25755.349609,"open":25998.269531,"volume":2360510452.3809523582,"symbol":"HSI"},{"date":"2008-05","close":24533.119141,"open":24448.369141,"volume":1968865905.0,"symbol":"HSI"},{"date":"2008-06","close":22102.009766,"open":22237.919922,"volume":1868362035.0,"symbol":"HSI"},{"date":"2008-07","close":22731.099609,"open":22878.759766,"volume":2053009263.6363637447,"symbol":"HSI"},{"date":"2008-08","close":21261.890625,"open":21289.699219,"volume":1754028495.2380952835,"symbol":"HSI"},{"date":"2008-09","close":18016.210938,"open":16898.330078,"volume":2950194409.523809433,"symbol":"HSI"},{"date":"2008-10","close":13968.669922,"open":14037.370117,"volume":3728888466.6666665077,"symbol":"HSI"},{"date":"2008-11","close":13888.240234,"open":13550.290039,"volume":2527160360.0,"symbol":"HSI"},{"date":"2008-12","close":14387.480469,"open":14377.509766,"volume":1962145085.7142856121,"symbol":"HSI"},{"date":"2009-01","close":13278.209961,"open":12958.080078,"volume":3283722677.7777776718,"symbol":"HSI"},{"date":"2009-02","close":12811.570313,"open":12929.990234,"volume":2067871145.0,"symbol":"HSI"},{"date":"2009-03","close":13576.019531,"open":13545.360352,"volume":2703725577.2727274895,"symbol":"HSI"},{"date":"2009-04","close":15520.990234,"open":15369.110352,"volume":2710807240.0,"symbol":"HSI"},{"date":"2009-05","close":18171.0,"open":18027.929688,"volume":2939430210.5263156891,"symbol":"HSI"},{"date":"2009-06","close":18378.730469,"open":18883.240234,"volume":2823552477.2727274895,"symbol":"HSI"},{"date":"2009-07","close":20573.330078,"open":20546.070313,"volume":2037870259.0909090042,"symbol":"HSI"},{"date":"2009-08","close":19724.189453,"open":19827.130859,"volume":2023802166.6666667461,"symbol":"HSI"},{"date":"2009-09","close":20955.25,"open":21036.179688,"volume":1725197818.1818182468,"symbol":"HSI"},{"date":"2009-10","close":21752.869141,"open":21720.410156,"volume":1748764235.0,"symbol":"HSI"},{"date":"2009-11","close":21821.5,"open":21687.689453,"volume":1649547580.9523808956,"symbol":"HSI"},{"date":"2009-12","close":21496.619141,"open":21469.330078,"volume":1420813727.2727272511,"symbol":"HSI"},{"date":"2010-01","close":20121.990234,"open":20026.519531,"volume":2094350555.0,"symbol":"HSI"},{"date":"2010-02","close":20608.699219,"open":20657.830078,"volume":1519361705.555555582,"symbol":"HSI"},{"date":"2010-03","close":21239.349609,"open":21366.619141,"volume":1645447213.0434782505,"symbol":"HSI"},{"date":"2010-04","close":21108.589844,"open":20934.070313,"volume":1778449389.4736843109,"symbol":"HSI"},{"date":"2010-05","close":19765.189453,"open":19705.529297,"volume":1717623305.0,"symbol":"HSI"},{"date":"2010-06","close":20128.990234,"open":19985.720703,"volume":1331008709.523809433,"symbol":"HSI"},{"date":"2010-07","close":21029.810547,"open":21008.460938,"volume":1285705542.8571429253,"symbol":"HSI"},{"date":"2010-08","close":20536.490234,"open":20539.220703,"volume":1209607559.0909090042,"symbol":"HSI"},{"date":"2010-09","close":22358.169922,"open":22287.080078,"volume":1481861380.9523808956,"symbol":"HSI"},{"date":"2010-10","close":23096.320313,"open":23177.689453,"volume":2142341425.0,"symbol":"HSI"},{"date":"2010-11","close":23007.990234,"open":23122.400391,"volume":1867107745.4545454979,"symbol":"HSI"},{"date":"2010-12","close":22999.339844,"open":22987.839844,"volume":1257716822.7272727489,"symbol":"HSI"},{"date":"2011-01","close":23447.339844,"open":23314.689453,"volume":1387842580.9523808956,"symbol":"HSI"},{"date":"2011-02","close":23338.019531,"open":22900.150391,"volume":1632715494.444444418,"symbol":"HSI"},{"date":"2011-03","close":23527.519531,"open":23618.060547,"volume":1805274508.6956522465,"symbol":"HSI"},{"date":"2011-04","close":23720.810547,"open":23729.769531,"volume":1538175300.0,"symbol":"HSI"},{"date":"2011-05","close":23684.130859,"open":23380.289063,"volume":1246756195.0,"symbol":"HSI"},{"date":"2011-06","close":22398.099609,"open":22233.699219,"volume":1665467552.3809523582,"symbol":"HSI"},{"date":"2011-07","close":22440.25,"open":22544.509766,"volume":1934749665.0,"symbol":"HSI"},{"date":"2011-08","close":20534.849609,"open":20256.339844,"volume":2466487582.608695507,"symbol":"HSI"},{"date":"2011-09","close":17592.410156,"open":17946.240234,"volume":2271726505.0,"symbol":"HSI"},{"date":"2011-10","close":19864.869141,"open":20027.720703,"volume":2211513150.0,"symbol":"HSI"},{"date":"2011-11","close":17989.349609,"open":18192.289063,"volume":1961902645.4545454979,"symbol":"HSI"},{"date":"2011-12","close":18434.390625,"open":18489.039063,"volume":1430265840.9090909958,"symbol":"HSI"},{"date":"2012-01","close":20390.490234,"open":20326.490234,"volume":1824464483.3333332539,"symbol":"HSI"},{"date":"2012-02","close":21680.080078,"open":21643.849609,"volume":1646170390.476190567,"symbol":"HSI"},{"date":"2012-03","close":20555.580078,"open":20380.060547,"volume":1650099642.8571429253,"symbol":"HSI"},{"date":"2012-04","close":21094.210938,"open":20889.769531,"volume":1541818477.7777776718,"symbol":"HSI"},{"date":"2012-05","close":18629.519531,"open":18470.769531,"volume":2034390363.6363637447,"symbol":"HSI"},{"date":"2012-06","close":19441.460938,"open":18996.570313,"volume":1553241561.9047617912,"symbol":"HSI"},{"date":"2012-07","close":19796.810547,"open":19661.410156,"volume":1413228152.3809523582,"symbol":"HSI"},{"date":"2012-08","close":19482.570313,"open":19516.949219,"volume":1247341182.6086957455,"symbol":"HSI"},{"date":"2012-09","close":20840.380859,"open":20757.970703,"volume":1665425225.0,"symbol":"HSI"},{"date":"2012-10","close":21641.820313,"open":21539.490234,"volume":1596258270.0,"symbol":"HSI"},{"date":"2012-11","close":22030.390625,"open":21949.400391,"volume":1358407395.4545454979,"symbol":"HSI"},{"date":"2012-12","close":22666.589844,"open":22706.330078,"volume":1627787236.8421051502,"symbol":"HSI"},{"date":"2013-01","close":23729.529297,"open":23799.169922,"volume":1669892290.9090909958,"symbol":"HSI"},{"date":"2013-02","close":23020.269531,"open":22826.419922,"volume":1708290764.7058823109,"symbol":"HSI"},{"date":"2013-03","close":22299.630859,"open":22390.349609,"volume":1822439925.0,"symbol":"HSI"},{"date":"2013-04","close":22737.009766,"open":22769.589844,"volume":1597734175.0,"symbol":"HSI"},{"date":"2013-05","close":22392.160156,"open":22582.550781,"volume":1625318747.6190476418,"symbol":"HSI"},{"date":"2013-06","close":20803.289063,"open":20596.630859,"volume":2270985589.4736843109,"symbol":"HSI"},{"date":"2013-07","close":21883.660156,"open":21888.800781,"volume":1514029163.6363637447,"symbol":"HSI"},{"date":"2013-08","close":21731.369141,"open":21618.339844,"volume":1515434645.4545454979,"symbol":"HSI"},{"date":"2013-09","close":22859.859375,"open":22946.740234,"volume":1828904880.0,"symbol":"HSI"},{"date":"2013-10","close":23206.369141,"open":23134.390625,"volume":1367018561.9047617912,"symbol":"HSI"},{"date":"2013-11","close":23881.289063,"open":23862.380859,"volume":1610585580.9523808956,"symbol":"HSI"},{"date":"2013-12","close":23306.390625,"open":23328.439453,"volume":1358245370.0,"symbol":"HSI"},{"date":"2014-01","close":22035.419922,"open":21827.330078,"volume":1672473080.9523808956,"symbol":"HSI"},{"date":"2014-02","close":22836.960938,"open":22942.960938,"volume":1702324094.7368421555,"symbol":"HSI"},{"date":"2014-03","close":22151.060547,"open":22244.160156,"volume":1725817447.6190476418,"symbol":"HSI"},{"date":"2014-04","close":22133.970703,"open":22466.039063,"volume":1600366570.0,"symbol":"HSI"},{"date":"2014-05","close":23081.650391,"open":23074.789063,"volume":1393567245.0,"symbol":"HSI"},{"date":"2014-06","close":23190.720703,"open":23273.189453,"volume":1404566500.0,"symbol":"HSI"},{"date":"2014-07","close":24756.849609,"open":24805.75,"volume":1441537204.5454545021,"symbol":"HSI"},{"date":"2014-08","close":24742.060547,"open":24748.189453,"volume":1337945604.7619047165,"symbol":"HSI"},{"date":"2014-09","close":22932.980469,"open":23137.259766,"volume":1678920338.0952382088,"symbol":"HSI"},{"date":"2014-10","close":23998.060547,"open":23913.689453,"volume":1542129038.0952382088,"symbol":"HSI"},{"date":"2014-11","close":23987.449219,"open":23982.289063,"volume":1855129600.0,"symbol":"HSI"},{"date":"2014-12","close":23605.039063,"open":23480.810547,"volume":2538457595.2380952835,"symbol":"HSI"},{"date":"2015-01","close":24507.050781,"open":24771.369141,"volume":1878195461.9047617912,"symbol":"HSI"},{"date":"2015-02","close":24823.289063,"open":24902.609375,"volume":1369764305.555555582,"symbol":"HSI"},{"date":"2015-03","close":24900.890625,"open":25113.199219,"volume":1663088772.7272727489,"symbol":"HSI"},{"date":"2015-04","close":28133.0,"open":28289.140625,"volume":3101072673.6842103004,"symbol":"HSI"},{"date":"2015-05","close":27424.189453,"open":27398.279297,"volume":1941495857.8947367668,"symbol":"HSI"},{"date":"2015-06","close":26250.029297,"open":25944.029297,"volume":2029501090.9090909958,"symbol":"HSI"},{"date":"2015-07","close":24636.279297,"open":24650.929688,"volume":2113821050.0,"symbol":"HSI"},{"date":"2015-08","close":21670.580078,"open":21793.019531,"volume":1994254909.523809433,"symbol":"HSI"},{"date":"2015-09","close":20846.300781,"open":20795.929688,"volume":2015483960.0,"symbol":"HSI"},{"date":"2015-10","close":22640.039063,"open":22785.859375,"volume":1715795410.0,"symbol":"HSI"},{"date":"2015-11","close":21996.419922,"open":21974.810547,"volume":1642126790.476190567,"symbol":"HSI"},{"date":"2015-12","close":21914.400391,"open":21892.25,"volume":1341041754.5454545021,"symbol":"HSI"},{"date":"2016-01","close":19683.109375,"open":19138.419922,"volume":2028269520.0,"symbol":"HSI"},{"date":"2016-02","close":19111.929688,"open":19366.169922,"volume":1591788666.6666667461,"symbol":"HSI"},{"date":"2016-03","close":20776.699219,"open":20811.460938,"volume":1622262347.6190476418,"symbol":"HSI"},{"date":"2016-04","close":21067.050781,"open":21215.199219,"volume":1532826130.0,"symbol":"HSI"},{"date":"2016-05","close":20815.089844,"open":20617.330078,"volume":1540283004.7619047165,"symbol":"HSI"},{"date":"2016-06","close":20794.369141,"open":20736.849609,"volume":1858174061.9047617912,"symbol":"HSI"},{"date":"2016-07","close":21891.369141,"open":22055.949219,"volume":1585690875.0,"symbol":"HSI"},{"date":"2016-08","close":22976.880859,"open":23043.080078,"volume":1755529621.739130497,"symbol":"HSI"},{"date":"2016-09","close":23297.150391,"open":23435.289063,"volume":1891819400.0,"symbol":"HSI"},{"date":"2016-10","close":22934.539063,"open":22845.820313,"volume":1369981645.0,"symbol":"HSI"},{"date":"2016-11","close":22789.769531,"open":22842.359375,"volume":1587715668.1818182468,"symbol":"HSI"},{"date":"2016-12","close":22000.560547,"open":21818.910156,"volume":1766831500.0,"symbol":"HSI"},{"date":"2017-01","close":23360.779297,"open":23339.150391,"volume":1359095568.4210526943,"symbol":"HSI"},{"date":"2017-02","close":23740.730469,"open":23952.640625,"volume":2061185740.0,"symbol":"HSI"},{"date":"2017-03","close":24111.589844,"open":24305.529297,"volume":1843005834.7826087475,"symbol":"HSI"},{"date":"2017-04","close":24615.130859,"open":24691.289063,"volume":1639074147.0588235855,"symbol":"HSI"},{"date":"2017-05","close":25660.650391,"open":25706.449219,"volume":1699947585.0,"symbol":"HSI"},{"date":"2017-06","close":25764.580078,"open":25679.640625,"volume":1632103172.7272727489,"symbol":"HSI"},{"date":"2017-07","close":27323.990234,"open":27048.449219,"volume":1770335847.6190476418,"symbol":"HSI"},{"date":"2017-08","close":27970.300781,"open":27934.449219,"volume":2139227513.0434782505,"symbol":"HSI"},{"date":"2017-09","close":27554.300781,"open":27492.130859,"volume":1619363190.476190567,"symbol":"HSI"},{"date":"2017-10","close":28245.539063,"open":28247.0,"volume":1822656920.0,"symbol":"HSI"},{"date":"2017-11","close":29177.349609,"open":29340.269531,"volume":1921109072.7272727489,"symbol":"HSI"},{"date":"2017-12","close":29919.150391,"open":29914.050781,"volume":1779809689.4736843109,"symbol":"HSI"},{"date":"2018-01","close":32887.269531,"open":32435.759766,"volume":2973770177.2727274895,"symbol":"HSI"},{"date":"2018-02","close":30844.720703,"open":31037.410156,"volume":2888096616.6666665077,"symbol":"HSI"},{"date":"2018-03","close":30093.380859,"open":30154.179688,"volume":2117076914.2857143879,"symbol":"HSI"},{"date":"2018-04","close":30808.449219,"open":30530.400391,"volume":1834139078.9473683834,"symbol":"HSI"},{"date":"2018-05","close":30468.560547,"open":30274.179688,"volume":1802676257.1428570747,"symbol":"HSI"},{"date":"2018-06","close":28955.109375,"open":28463.849609,"volume":2129997490.0,"symbol":"HSI"},{"date":"2018-07","close":28583.009766,"open":28663.140625,"volume":1792651395.2380952835,"symbol":"HSI"},{"date":"2018-08","close":27888.550781,"open":27798.210938,"volume":1630783286.9565217495,"symbol":"HSI"},{"date":"2018-09","close":27788.519531,"open":27879.060547,"volume":1869968068.4210526943,"symbol":"HSI"},{"date":"2018-10","close":24979.689453,"open":24752.830078,"volume":1962877004.7619047165,"symbol":"HSI"},{"date":"2018-11","close":26506.75,"open":26506.089844,"volume":1589632204.5454545021,"symbol":"HSI"},{"date":"2018-12","close":25845.699219,"open":25732.519531,"volume":1572421663.1578948498,"symbol":"HSI"},{"date":"2019-01","close":27942.470703,"open":27842.050781,"volume":1753688090.9090909958,"symbol":"HSI"},{"date":"2019-02","close":28633.179688,"open":28719.710938,"volume":1848358605.882352829,"symbol":"HSI"},{"date":"2019-03","close":29051.359375,"open":28812.640625,"volume":1765641480.9523808956,"symbol":"HSI"},{"date":"2019-04","close":29699.109375,"open":29828.150391,"volume":1864862794.7368421555,"symbol":"HSI"},{"date":"2019-05","close":26901.089844,"open":27002.960938,"volume":2129737066.6666667461,"symbol":"HSI"},{"date":"2019-06","close":28542.619141,"open":28632.589844,"volume":1761902021.0526316166,"symbol":"HSI"},{"date":"2019-07","close":27777.75,"open":27931.279297,"volume":1174238059.0909090042,"symbol":"HSI"},{"date":"2019-08","close":25724.730469,"open":26011.640625,"volume":1904691390.9090909958,"symbol":"HSI"},{"date":"2019-09","close":26092.269531,"open":25844.710938,"volume":1663394328.5714285374,"symbol":"HSI"},{"date":"2019-10","close":26906.720703,"open":26708.449219,"volume":1501377061.9047617912,"symbol":"HSI"},{"date":"2019-11","close":26346.490234,"open":26705.380859,"volume":1520746414.2857143879,"symbol":"HSI"},{"date":"2019-12","close":28189.75,"open":28241.429688,"volume":1327250810.0,"symbol":"HSI"},{"date":"2002-01","close":1.765714,"open":1.725714,"volume":101373533.3333333284,"symbol":"AAPL"},{"date":"2002-02","close":1.55,"open":1.582143,"volume":103124000.0,"symbol":"AAPL"},{"date":"2002-03","close":1.690714,"open":1.692857,"volume":66482290.0,"symbol":"AAPL"},{"date":"2002-04","close":1.733571,"open":1.706429,"volume":72986772.727272734,"symbol":"AAPL"},{"date":"2002-05","close":1.664286,"open":1.720714,"volume":67910881.8181818128,"symbol":"AAPL"},{"date":"2002-06","close":1.265714,"open":1.221429,"volume":108850210.0,"symbol":"AAPL"},{"date":"2002-07","close":1.09,"open":1.1,"volume":92254718.1818181872,"symbol":"AAPL"},{"date":"2002-08","close":1.053571,"open":1.052143,"volume":58541890.9090909064,"symbol":"AAPL"},{"date":"2002-09","close":1.035714,"open":1.028571,"volume":66147970.0,"symbol":"AAPL"},{"date":"2002-10","close":1.147857,"open":1.142143,"volume":71863400.0,"symbol":"AAPL"},{"date":"2002-11","close":1.107143,"open":1.127857,"volume":56646520.0,"symbol":"AAPL"},{"date":"2002-12","close":1.023571,"open":1.0,"volume":53933800.0,"symbol":"AAPL"},{"date":"2003-01","close":1.025714,"open":1.013571,"volume":71974200.0,"symbol":"AAPL"},{"date":"2003-02","close":1.072143,"open":1.061429,"volume":54135568.4210526347,"symbol":"AAPL"},{"date":"2003-03","close":1.01,"open":1.023571,"volume":47957200.0,"symbol":"AAPL"},{"date":"2003-04","close":1.015714,"open":0.995,"volume":92563600.0,"symbol":"AAPL"},{"date":"2003-05","close":1.282143,"open":1.294286,"volume":128708866.6666666716,"symbol":"AAPL"},{"date":"2003-06","close":1.361429,"open":1.334286,"volume":72777800.0,"symbol":"AAPL"},{"date":"2003-07","close":1.505714,"open":1.481429,"volume":59298527.2727272734,"symbol":"AAPL"},{"date":"2003-08","close":1.615,"open":1.585714,"volume":51280533.3333333358,"symbol":"AAPL"},{"date":"2003-09","close":1.48,"open":1.506429,"volume":63660533.3333333358,"symbol":"AAPL"},{"date":"2003-10","close":1.635,"open":1.664286,"volume":76523817.3913043439,"symbol":"AAPL"},{"date":"2003-11","close":1.493571,"open":1.484286,"volume":65448747.3684210554,"symbol":"AAPL"},{"date":"2003-12","close":1.526429,"open":1.525,"volume":61975836.363636367,"symbol":"AAPL"},{"date":"2004-01","close":1.611429,"open":1.617857,"volume":99097530.0,"symbol":"AAPL"},{"date":"2004-02","close":1.708571,"open":1.64,"volume":64763557.8947368413,"symbol":"AAPL"},{"date":"2004-03","close":1.931429,"open":1.994286,"volume":126370817.3913043439,"symbol":"AAPL"},{"date":"2004-04","close":1.841429,"open":1.907857,"volume":106311600.0,"symbol":"AAPL"},{"date":"2004-05","close":2.004286,"open":2.005714,"volume":66303440.0,"symbol":"AAPL"},{"date":"2004-06","close":2.324286,"open":2.325714,"volume":97943266.6666666716,"symbol":"AAPL"},{"date":"2004-07","close":2.31,"open":2.332143,"volume":115435466.6666666716,"symbol":"AAPL"},{"date":"2004-08","close":2.463571,"open":2.433571,"volume":91038245.4545454532,"symbol":"AAPL"},{"date":"2004-09","close":2.767857,"open":2.785714,"volume":91351266.6666666716,"symbol":"AAPL"},{"date":"2004-10","close":3.742857,"open":3.702857,"volume":191599600.0,"symbol":"AAPL"},{"date":"2004-11","close":4.789286,"open":4.913571,"volume":207614333.3333333433,"symbol":"AAPL"},{"date":"2004-12","close":4.6,"open":4.635,"volume":181234263.6363636255,"symbol":"AAPL"},{"date":"2005-01","close":5.492857,"open":5.327143,"volume":321353060.0,"symbol":"AAPL"},{"date":"2005-02","close":6.408571,"open":6.382857,"volume":282222978.947368443,"symbol":"AAPL"},{"date":"2005-03","close":5.952857,"open":6.064286,"volume":166771818.1818181872,"symbol":"AAPL"},{"date":"2005-04","close":5.151429,"open":5.164286,"volume":230660933.3333333433,"symbol":"AAPL"},{"date":"2005-05","close":5.68,"open":5.808571,"volume":153074933.3333333433,"symbol":"AAPL"},{"date":"2005-06","close":5.258572,"open":5.23,"volume":128718131.8181818128,"symbol":"AAPL"},{"date":"2005-07","close":6.092857,"open":6.222857,"volume":126178080.0,"symbol":"AAPL"},{"date":"2005-08","close":6.698571,"open":6.694286,"volume":102182682.6086956561,"symbol":"AAPL"},{"date":"2005-09","close":7.658571,"open":7.475714,"volume":146997266.6666666567,"symbol":"AAPL"},{"date":"2005-10","close":8.227143,"open":7.885714,"volume":221945800.0,"symbol":"AAPL"},{"date":"2005-11","close":9.688571,"open":9.775714,"volume":160195566.6666666567,"symbol":"AAPL"},{"date":"2005-12","close":10.27,"open":10.13,"volume":155525766.6666666567,"symbol":"AAPL"},{"date":"2006-01","close":10.787143,"open":10.785714,"volume":273479640.0,"symbol":"AAPL"},{"date":"2006-02","close":9.784286,"open":10.225715,"volume":246851278.9473684132,"symbol":"AAPL"},{"date":"2006-03","close":8.96,"open":9.035714,"volume":252093830.4347825944,"symbol":"AAPL"},{"date":"2006-04","close":10.055715,"open":9.911428,"volume":264727400.0,"symbol":"AAPL"},{"date":"2006-05","close":8.538571,"open":8.822857,"volume":177372490.9090909064,"symbol":"AAPL"},{"date":"2006-06","close":8.181429,"open":8.227143,"volume":203825268.1818181872,"symbol":"AAPL"},{"date":"2006-07","close":9.708571,"open":9.547143,"volume":218496775.0,"symbol":"AAPL"},{"date":"2006-08","close":9.692857,"open":9.611428,"volume":194430934.7826086879,"symbol":"AAPL"},{"date":"2006-09","close":10.997143,"open":11.015715,"volume":221519480.0,"symbol":"AAPL"},{"date":"2006-10","close":11.582857,"open":11.635715,"volume":163499509.0909090936,"symbol":"AAPL"},{"date":"2006-11","close":13.094286,"open":13.172857,"volume":164701000.0,"symbol":"AAPL"},{"date":"2006-12","close":12.12,"open":11.992857,"volume":211134910.0,"symbol":"AAPL"},{"date":"2007-01","close":12.247143,"open":12.122857,"volume":340122265.0,"symbol":"AAPL"},{"date":"2007-02","close":12.087143,"open":11.857142,"volume":180557300.0,"symbol":"AAPL"},{"date":"2007-03","close":13.272857,"open":13.468572,"volume":180893681.8181818128,"symbol":"AAPL"},{"date":"2007-04","close":14.257143,"open":14.298572,"volume":168246750.0,"symbol":"AAPL"},{"date":"2007-05","close":17.312857,"open":17.152857,"volume":197330318.1818181872,"symbol":"AAPL"},{"date":"2007-06","close":17.434286,"open":17.424286,"volume":277137400.0,"symbol":"AAPL"},{"date":"2007-07","close":18.822857,"open":20.424286,"volume":285935400.0,"symbol":"AAPL"},{"date":"2007-08","close":19.782858,"open":19.927143,"volume":264791282.6086956561,"symbol":"AAPL"},{"date":"2007-09","close":21.924286,"open":21.92,"volume":275410836.8421052694,"symbol":"AAPL"},{"date":"2007-10","close":27.135714,"open":26.804285,"volume":253019473.9130434692,"symbol":"AAPL"},{"date":"2007-11","close":26.031429,"open":26.762857,"volume":311902266.6666666865,"symbol":"AAPL"},{"date":"2007-12","close":28.297142,"open":28.5,"volume":215658485.0,"symbol":"AAPL"},{"date":"2008-01","close":19.337143,"open":18.492857,"volume":418736766.6666666865,"symbol":"AAPL"},{"date":"2008-02","close":17.860001,"open":18.469999,"volume":310824430.0,"symbol":"AAPL"},{"date":"2008-03","close":20.5,"open":20.467142,"volume":286590920.0,"symbol":"AAPL"},{"date":"2008-04","close":24.85,"open":25.17,"volume":258942981.8181818128,"symbol":"AAPL"},{"date":"2008-05","close":26.964285,"open":26.778572,"volume":221288266.6666666567,"symbol":"AAPL"},{"date":"2008-06","close":23.92,"open":24.312857,"volume":231854700.0,"symbol":"AAPL"},{"date":"2008-07","close":22.707144,"open":22.505714,"volume":224429100.0,"symbol":"AAPL"},{"date":"2008-08","close":24.218571,"open":24.70857,"volume":155782800.0,"symbol":"AAPL"},{"date":"2008-09","close":16.237143,"open":15.464286,"volume":286518600.0,"symbol":"AAPL"},{"date":"2008-10","close":15.37,"open":15.342857,"volume":450290339.1304348111,"symbol":"AAPL"},{"date":"2008-11","close":13.238571,"open":13.528571,"volume":310782389.4736841917,"symbol":"AAPL"},{"date":"2008-12","close":12.192857,"open":12.281428,"volume":229702804.5454545319,"symbol":"AAPL"},{"date":"2009-01","close":12.875714,"open":13.228572,"volume":226321760.0,"symbol":"AAPL"},{"date":"2009-02","close":12.758572,"open":12.561429,"volume":182466457.8947368562,"symbol":"AAPL"},{"date":"2009-03","close":15.017143,"open":15.064285,"volume":175279522.7272727191,"symbol":"AAPL"},{"date":"2009-04","close":17.975714,"open":18.031429,"volume":140734300.0,"symbol":"AAPL"},{"date":"2009-05","close":19.401428,"open":19.341429,"volume":118214285.0,"symbol":"AAPL"},{"date":"2009-06","close":20.347143,"open":20.368572,"volume":144040590.9090909064,"symbol":"AAPL"},{"date":"2009-07","close":23.341429,"open":23.284286,"volume":124342463.6363636404,"symbol":"AAPL"},{"date":"2009-08","close":24.030001,"open":24.022858,"volume":97203866.6666666716,"symbol":"AAPL"},{"date":"2009-09","close":26.478571,"open":26.59,"volume":118920466.6666666716,"symbol":"AAPL"},{"date":"2009-10","close":26.928572,"open":28.008572,"volume":147229281.8181818128,"symbol":"AAPL"},{"date":"2009-11","close":28.558571,"open":28.73,"volume":105684810.0,"symbol":"AAPL"},{"date":"2009-12","close":30.104286,"open":30.447144,"volume":129476804.5454545468,"symbol":"AAPL"},{"date":"2010-01","close":27.437143,"open":28.725714,"volume":199592031.5789473653,"symbol":"AAPL"},{"date":"2010-02","close":29.231428,"open":28.911428,"volume":141790526.3157894611,"symbol":"AAPL"},{"date":"2010-03","close":33.57143,"open":33.64143,"volume":132110573.9130434841,"symbol":"AAPL"},{"date":"2010-04","close":37.298573,"open":38.472858,"volume":147227733.3333333433,"symbol":"AAPL"},{"date":"2010-05","close":36.697144,"open":37.055714,"volume":226033185.0,"symbol":"AAPL"},{"date":"2010-06","close":35.932858,"open":36.672855,"volume":189218781.8181818128,"symbol":"AAPL"},{"date":"2010-07","close":36.75,"open":36.555714,"volume":186544100.0,"symbol":"AAPL"},{"date":"2010-08","close":34.728573,"open":34.549999,"volume":108967281.8181818128,"symbol":"AAPL"},{"date":"2010-09","close":40.535713,"open":41.285713,"volume":141070466.6666666567,"symbol":"AAPL"},{"date":"2010-10","close":42.997143,"open":43.46143,"volume":145649733.3333333433,"symbol":"AAPL"},{"date":"2010-11","close":44.450001,"open":44.791428,"volume":113191500.0,"symbol":"AAPL"},{"date":"2010-12","close":46.080002,"open":46.135715,"volume":79241304.5454545468,"symbol":"AAPL"},{"date":"2011-01","close":48.474285,"open":47.971428,"volume":135519195.0,"symbol":"AAPL"},{"date":"2011-02","close":50.458572,"open":50.177143,"volume":122315126.315789476,"symbol":"AAPL"},{"date":"2011-03","close":49.787144,"open":49.48,"volume":122896291.304347828,"symbol":"AAPL"},{"date":"2011-04","close":50.01857,"open":49.540001,"volume":115672865.0,"symbol":"AAPL"},{"date":"2011-05","close":49.689999,"open":48.728573,"volume":82286433.3333333284,"symbol":"AAPL"},{"date":"2011-06","close":47.952858,"open":47.814285,"volume":105271027.272727266,"symbol":"AAPL"},{"date":"2011-07","close":55.782856,"open":55.377144,"volume":133174335.0,"symbol":"AAPL"},{"date":"2011-08","close":54.975716,"open":55.795715,"volume":175463034.7826086879,"symbol":"AAPL"},{"date":"2011-09","close":54.474285,"open":55.302856,"volume":142588666.6666666567,"symbol":"AAPL"},{"date":"2011-10","close":57.825714,"open":57.488571,"volume":156445566.6666666567,"symbol":"AAPL"},{"date":"2011-11","close":54.599998,"open":54.470001,"volume":106710733.3333333284,"symbol":"AAPL"},{"date":"2011-12","close":57.857143,"open":57.644287,"volume":75077766.6666666716,"symbol":"AAPL"},{"date":"2012-01","close":65.211426,"open":65.084282,"volume":85748180.0,"symbol":"AAPL"},{"date":"2012-02","close":77.491432,"open":77.365715,"volume":142106930.0,"symbol":"AAPL"},{"date":"2012-03","close":85.650002,"open":86.96714,"volume":177094750.0,"symbol":"AAPL"},{"date":"2012-04","close":83.425713,"open":85.400002,"volume":194987380.0,"symbol":"AAPL"},{"date":"2012-05","close":82.53286,"open":82.96286,"volume":126208472.727272734,"symbol":"AAPL"},{"date":"2012-06","close":83.428574,"open":82.571426,"volume":93521733.3333333284,"symbol":"AAPL"},{"date":"2012-07","close":87.251427,"open":86.175713,"volume":106067266.6666666716,"symbol":"AAPL"},{"date":"2012-08","close":95.034286,"open":95.321426,"volume":89958765.2173912972,"symbol":"AAPL"},{"date":"2012-09","close":95.300003,"open":96.964287,"volume":121039542.1052631587,"symbol":"AAPL"},{"date":"2012-10","close":85.045715,"open":84.982857,"volume":144557500.0,"symbol":"AAPL"},{"date":"2012-11","close":83.611427,"open":83.827141,"volume":153926800.0,"symbol":"AAPL"},{"date":"2012-12","close":76.024284,"open":72.932854,"volume":151659410.0,"symbol":"AAPL"},{"date":"2013-01","close":65.07,"open":65.28286,"volume":156231233.3333333433,"symbol":"AAPL"},{"date":"2013-02","close":63.057144,"open":63.435715,"volume":122947815.7894736826,"symbol":"AAPL"},{"date":"2013-03","close":63.237144,"open":64.260002,"volume":114710960.0,"symbol":"AAPL"},{"date":"2013-04","close":63.254284,"open":62.157143,"volume":124585109.0909090936,"symbol":"AAPL"},{"date":"2013-05","close":64.247147,"open":64.64286,"volume":107358300.0,"symbol":"AAPL"},{"date":"2013-06","close":56.647144,"open":55.908573,"volume":87731700.0,"symbol":"AAPL"},{"date":"2013-07","close":64.647141,"open":64.998573,"volume":74296759.0909090936,"symbol":"AAPL"},{"date":"2013-08","close":69.602859,"open":70.285713,"volume":91572027.272727266,"symbol":"AAPL"},{"date":"2013-09","close":68.10714,"open":68.178574,"volume":107886765.0,"symbol":"AAPL"},{"date":"2013-10","close":74.671425,"open":75.0,"volume":85192739.1304347813,"symbol":"AAPL"},{"date":"2013-11","close":79.438568,"open":78.497147,"volume":65314445.0,"symbol":"AAPL"},{"date":"2013-12","close":80.145714,"open":79.167145,"volume":84016633.3333333284,"symbol":"AAPL"},{"date":"2014-01","close":71.514282,"open":70.739998,"volume":104356600.0,"symbol":"AAPL"},{"date":"2014-02","close":75.177139,"open":75.582855,"volume":77373247.3684210479,"symbol":"AAPL"},{"date":"2014-03","close":76.677139,"open":77.03286,"volume":59544033.3333333358,"symbol":"AAPL"},{"date":"2014-04","close":84.298569,"open":84.662857,"volume":76607866.6666666716,"symbol":"AAPL"},{"date":"2014-05","close":90.428574,"open":91.139999,"volume":68281766.6666666716,"symbol":"AAPL"},{"date":"2014-06","close":92.93,"open":92.099998,"volume":57473085.7142857164,"symbol":"AAPL"},{"date":"2014-07","close":95.599998,"open":97.160004,"volume":47049363.636363633,"symbol":"AAPL"},{"date":"2014-08","close":102.5,"open":102.860001,"volume":44622714.2857142836,"symbol":"AAPL"},{"date":"2014-09","close":100.75,"open":100.809998,"volume":72686666.6666666716,"symbol":"AAPL"},{"date":"2014-10","close":108.0,"open":108.010002,"volume":59142617.3913043514,"symbol":"AAPL"},{"date":"2014-11","close":118.93,"open":119.269997,"volume":43179378.9473684207,"symbol":"AAPL"},{"date":"2014-12","close":110.379997,"open":112.82,"volume":48799754.5454545468,"symbol":"AAPL"},{"date":"2015-01","close":117.160004,"open":118.400002,"volume":65263170.0,"symbol":"AAPL"},{"date":"2015-02","close":128.460007,"open":130.0,"volume":59817642.1052631587,"symbol":"AAPL"},{"date":"2015-03","close":124.43,"open":126.089996,"volume":51756459.0909090936,"symbol":"AAPL"},{"date":"2015-04","close":125.150002,"open":128.639999,"volume":47435023.809523806,"symbol":"AAPL"},{"date":"2015-05","close":130.279999,"open":131.229996,"volume":47707605.0,"symbol":"AAPL"},{"date":"2015-06","close":125.43,"open":125.57,"volume":39936668.1818181798,"symbol":"AAPL"},{"date":"2015-07","close":121.300003,"open":122.599998,"volume":48103663.636363633,"symbol":"AAPL"},{"date":"2015-08","close":112.760002,"open":112.029999,"volume":76515195.2380952388,"symbol":"AAPL"},{"date":"2015-09","close":110.300003,"open":110.169998,"volume":57454633.3333333358,"symbol":"AAPL"},{"date":"2015-10","close":119.5,"open":120.989998,"volume":50568731.8181818202,"symbol":"AAPL"},{"date":"2015-11","close":118.300003,"open":117.989998,"volume":37532030.0,"symbol":"AAPL"},{"date":"2015-12","close":105.260002,"open":107.010002,"volume":41905236.363636367,"symbol":"AAPL"},{"date":"2016-01","close":97.339996,"open":94.790001,"volume":66939368.4210526347,"symbol":"AAPL"},{"date":"2016-02","close":96.690002,"open":96.860001,"volume":40543130.0,"symbol":"AAPL"},{"date":"2016-03","close":108.989998,"open":109.720001,"volume":33911345.4545454532,"symbol":"AAPL"},{"date":"2016-04","close":93.739998,"open":93.989998,"volume":41542080.9523809552,"symbol":"AAPL"},{"date":"2016-05","close":99.860001,"open":99.599998,"volume":42889119.0476190448,"symbol":"AAPL"},{"date":"2016-06","close":95.599998,"open":94.440002,"volume":35431713.636363633,"symbol":"AAPL"},{"date":"2016-07","close":104.209999,"open":104.190002,"volume":34288980.0,"symbol":"AAPL"},{"date":"2016-08","close":106.099998,"open":105.660004,"volume":27396891.3043478243,"symbol":"AAPL"},{"date":"2016-09","close":113.050003,"open":112.459999,"volume":46095980.9523809552,"symbol":"AAPL"},{"date":"2016-10","close":113.540001,"open":113.650002,"volume":32710204.7619047612,"symbol":"AAPL"},{"date":"2016-11","close":110.519997,"open":111.599998,"volume":34359761.904761903,"symbol":"AAPL"},{"date":"2016-12","close":115.82,"open":116.650002,"volume":28989128.5714285709,"symbol":"AAPL"},{"date":"2017-01","close":121.349998,"open":121.150002,"volume":28156100.0,"symbol":"AAPL"},{"date":"2017-02","close":136.990005,"open":137.080002,"volume":30261505.263157893,"symbol":"AAPL"},{"date":"2017-03","close":143.660004,"open":143.720001,"volume":24418626.0869565234,"symbol":"AAPL"},{"date":"2017-04","close":143.649994,"open":144.089996,"volume":19647584.2105263174,"symbol":"AAPL"},{"date":"2017-05","close":152.759995,"open":153.970001,"volume":29726445.4545454532,"symbol":"AAPL"},{"date":"2017-06","close":144.020004,"open":144.449997,"volume":31099004.5454545468,"symbol":"AAPL"},{"date":"2017-07","close":148.729996,"open":149.899994,"volume":21100595.0,"symbol":"AAPL"},{"date":"2017-08","close":164.0,"open":163.639999,"volume":28742130.4347826093,"symbol":"AAPL"},{"date":"2017-09","close":154.119995,"open":153.210007,"volume":34018705.0,"symbol":"AAPL"},{"date":"2017-10","close":169.039993,"open":167.899994,"volume":22922331.8181818165,"symbol":"AAPL"},{"date":"2017-11","close":171.850006,"open":170.429993,"volume":28603019.0476190485,"symbol":"AAPL"},{"date":"2017-12","close":169.229996,"open":170.520004,"volume":26559190.0,"symbol":"AAPL"},{"date":"2018-01","close":167.429993,"open":166.869995,"volume":31413304.7619047612,"symbol":"AAPL"},{"date":"2018-02","close":178.119995,"open":179.259995,"volume":48836542.1052631587,"symbol":"AAPL"},{"date":"2018-03","close":167.779999,"open":167.809998,"volume":33987033.3333333358,"symbol":"AAPL"},{"date":"2018-04","close":165.259995,"open":162.130005,"volume":31721633.3333333321,"symbol":"AAPL"},{"date":"2018-05","close":186.869995,"open":187.220001,"volume":28226195.4545454532,"symbol":"AAPL"},{"date":"2018-06","close":185.110001,"open":186.289993,"volume":25124976.1904761903,"symbol":"AAPL"},{"date":"2018-07","close":190.289993,"open":190.300003,"volume":18747209.5238095224,"symbol":"AAPL"},{"date":"2018-08","close":227.630005,"open":226.509995,"volume":30448647.826086957,"symbol":"AAPL"},{"date":"2018-09","close":225.740005,"open":224.789993,"volume":35735368.4210526347,"symbol":"AAPL"},{"date":"2018-10","close":218.860001,"open":216.880005,"volume":34336891.304347828,"symbol":"AAPL"},{"date":"2018-11","close":178.580002,"open":180.289993,"volume":45777447.6190476194,"symbol":"AAPL"},{"date":"2018-12","close":157.740005,"open":158.529999,"volume":47311710.5263157859,"symbol":"AAPL"},{"date":"2019-01","close":166.440002,"open":166.110001,"volume":39432733.3333333358,"symbol":"AAPL"},{"date":"2019-02","close":173.149994,"open":174.320007,"volume":24870557.8947368413,"symbol":"AAPL"},{"date":"2019-03","close":189.949997,"open":189.830002,"volume":30999114.2857142873,"symbol":"AAPL"},{"date":"2019-04","close":200.669998,"open":203.059998,"volume":24100842.8571428582,"symbol":"AAPL"},{"date":"2019-05","close":175.070007,"open":176.229996,"volume":33611663.636363633,"symbol":"AAPL"},{"date":"2019-06","close":197.919998,"open":198.679993,"volume":25759365.0,"symbol":"AAPL"},{"date":"2019-07","close":213.039993,"open":216.419998,"volume":21542886.3636363633,"symbol":"AAPL"},{"date":"2019-08","close":208.740005,"open":210.160004,"volume":30957936.3636363633,"symbol":"AAPL"},{"date":"2019-09","close":223.970001,"open":220.899994,"volume":27128355.0,"symbol":"AAPL"},{"date":"2019-10","close":248.759995,"open":247.240005,"volume":26447943.478260871,"symbol":"AAPL"},{"date":"2019-11","close":267.25,"open":266.600006,"volume":22416575.0,"symbol":"AAPL"},{"date":"2019-12","close":293.649994,"open":289.929993,"volume":28438033.3333333321,"symbol":"AAPL"}];

        // data = data.filter(function(d) {
        //   return d.symbol == 'HSI'
        // })

        var margin = {top: 20, right: 30, bottom: 50, left: 100};
        var width = 1460 - margin.left - margin.right;
        var height = 600 - margin.top - margin.bottom;

        var svg = d3.select("#chart1")
          .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");    

        function updateField(data,field) {
          var xScale = d3.scaleBand()
            .range([0, width])
            .domain(data.map(function (s) {return s.date}))
            .padding(0.4)

          svg.selectAll('g.xaxis')
            .remove()            

          svg.append('g')
            .attr('class', 'xaxis')
            .attr('transform', `translate(0, ${height})`)
            .call(d3.axisBottom(xScale))
            .selectAll("text")
            .attr("y", 0)
            .attr("x", 9)
            //.attr("dy", ".35em")
            .attr("class", function(d){
              //console.log(d.indexOf('-01')==4)
              if ((d.indexOf('-01')==4) || (d.indexOf('-04')==4) || (d.indexOf('-07')==4) || (d.indexOf('-10')==4))
                return '';
              else
                return 'hide';
            })
            .attr("dx", "-1.5em")
            .attr("dy", "0.3em")            
            .attr("transform", "rotate(-90)")
            .style("text-anchor", "end");

          var field_max = d3.max(data, function(d) {return d[field]});
          var field_round = Math.pow(10,Math.floor(Math.log10(field_max)));

          var yScale = d3.scaleLinear()
            .range([height, 0])
            .domain([0, Math.ceil(field_max/field_round)*field_round]);

          svg.selectAll('g.yaxis')
            .remove()

          svg.append('g')
            .attr('class', 'yaxis')
            .call(d3.axisLeft(yScale));   

          var barGroups = svg.selectAll('g.bar')
            .remove()
            .exit()
            .data(data)
            .enter()
            .append('g')
            .attr('class','bar')

          barGroups
            .append('rect')
            .attr('class', 'bar')          
            .attr('x', (g) => xScale(g.date))
            .attr('y', (g) => yScale(g[field]))
            .attr('height', (g) => height - yScale(g[field]))
            .attr('width', xScale.bandwidth())
            .on('mouseenter', function (actual, i) {
              var y = yScale(actual[field])
              var x = xScale(actual.date)

              yline = svg.append('line')
                .attr('id', 'limity')
                .attr('x1', 0)
                .attr('y1', y)
                .attr('x2', width)
                .attr('y2', y)

              xline = svg.append('line')
                .attr('id', 'limitx')
                .attr('x1', x)
                .attr('y1', 0)
                .attr('x2', x)
                .attr('y2', height)              

              // update info box
              d3.select('#info_symbol')
                .text('Symbol: ' + actual.symbol)              
              d3.select('#info_date')
                .text('Date: ' + actual.date)
              d3.select('#info_open')
                .text('Open: ' + actual.open.toFixed(0))     
              d3.select('#info_close')
                .text('Close: ' + actual.close.toFixed(0)) 
              d3.select('#info_volume')
                .text('Avg Volume: ' + (actual.volume/1000000).toFixed(0) + 'M')                                            
            })
            .on('mouseleave', function () {
              svg.selectAll('#limitx').remove()
              svg.selectAll('#limity').remove()
              // clear info box
              //d3.selectAll('.info_box').text('')
            });
          }

          function filterData() {
              // find all checked year
              var sel_data_year = [];
              $.each($("input[name='sel_data_year']:checked"), function(){
                sel_data_year.push($(this).val());
              });      

              // get data column
              var col = $('#sel_data_column').find(":selected").val()

              // get symbol
              var sym = $('#sel_symbol').find(":selected").val()

              var bReset = sel_data_year.length == 0;

              // create filtered data
              new_data = data.filter(function(d) { 
                return (bReset || sel_data_year.includes(d.date.substr(0,4))) && (d.symbol == sym);
              });

              //console.log(new_data)

              // call update
              updateField(new_data,col) 

              // update title
              d3.select('#graph_title')
                .text(sym+' since 2002')
          }

          // listener
          d3.select('#sel_data_column').
              on('change', function() {
                filterData();
              })
          d3.select('#sel_symbol').
              on('change', function() {
                filterData();
              })              
          d3.selectAll('.sel_data_year').
            on('click', function() {
              filterData();
            })

          // init
          //updateField(data,'close')
          filterData()

      }
      graph()
    </script>    
  </body>
</html>